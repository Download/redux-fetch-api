{"version":3,"sources":["webpack:///webpack/bootstrap 89202a58c47e79a13d7c","webpack:///./redux-fetch-api.spec.jsx","webpack:///external \"chai\"","webpack:///external \"redux-apis\"","webpack:///./redux-fetch-api.jsx","webpack:///external \"isomorphic-fetch\""],"names":[],"mappings":"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","file":"redux-fetch-api.spec.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 89202a58c47e79a13d7c\n **/","import { expect } from 'chai';\r\nimport { Api, link } from 'redux-apis';\r\n\r\nimport remote from './redux-fetch-api';\r\n\r\nfunction fetch(url, opts) {\r\n\tconsole.log('fetch(', url, opts ? ', ' : '', opts ? opts : '');\r\n}\r\n\r\ndescribe('@remote(url=\\'\\', clientUrl=null, onClient=isOnClient())', () => {\r\n\tit('is a decorator function', () => {\r\n\t\texpect(remote).to.be.a('function');\r\n\t\t@remote('/test')\r\n\t\tclass Test {}\r\n\t\texpect(Test).to.be.a('function');\r\n\t});\r\n\r\n\tit('decorates the target component with a `fetch` method', () => {\r\n\t\t@remote\r\n\t\tclass Test { }\r\n\t\tconst test = new Test();\r\n\t\texpect(test).to.have.a.property('fetch');\r\n\t\texpect(test.fetch).to.be.a('function');\r\n\t});\r\n\r\n\tit('adds `url` as a property on the added `fetch` method', () => {\r\n\t\t@remote('/test')\r\n\t\tclass Test{}\r\n\t\tconst test = new Test();\r\n\t\texpect(test.fetch).to.have.a.property('url');\r\n\t\texpect(test.fetch.url).to.equal('/test');\r\n\t});\r\n\r\n\tit('uses either the `url` or `clientUrl` based on the `onClient` flag', () => {\r\n\t\t@remote('/server', '/client', false)\r\n\t\tclass Test1{}\r\n\t\tconst test1 = new Test1();\r\n\t\texpect(test1.fetch.url).to.equal('/server');\r\n\t\t@remote('/server', '/client', true)\r\n\t\tclass Test2{}\r\n\t\tconst test2 = new Test2();\r\n\t\texpect(test2.fetch.url).to.equal('/client');\r\n\t});\r\n\r\n\tit('works when called with braces', ()=>{\r\n\t\t@remote()\r\n\t\tclass Test {}\r\n\t\tconst test = new Test();\r\n\t\texpect(test.fetch).to.be.a('function');\r\n\t})\r\n\r\n\tit('works when called without braces', ()=>{\r\n\t\t@remote\r\n\t\tclass Test {}\r\n\t\tconst test = new Test();\r\n\t\texpect(test.fetch).to.be.a('function');\r\n\t})\r\n\r\n\tit('works when used as a regular function', () => {\r\n\t\tconst Test = remote(class Test { })\r\n\t\tconst test = new Test();\r\n\t\texpect(test).to.have.a.property('fetch');\r\n\t\texpect(test.fetch).to.be.a('function');\r\n\t\tconst Test2 = remote('/test')(class Test2 { })\r\n\t\tconst test2 = new Test2();\r\n\t\texpect(test2).to.have.a.property('fetch');\r\n\t\texpect(test2.fetch).to.have.a.property('url');\r\n\t\texpect(test2.fetch.url).to.equal('/test');\r\n\t});\r\n\r\n\tit('can be used on nested components', () => {\r\n\t\t@remote('/inner')\r\n\t\tclass Inner extends Api {}\r\n\t\t@remote('/outer')\r\n\t\tclass Outer extends Api {constructor(state){super(state); this.inner = link(this, new Inner());}}\r\n\t\t@remote('/other')\r\n\t\tclass Other extends Api {constructor(state){super(state); this.inner = link(this, new Inner());}}\r\n\t\t@remote('http://some-server.com/api')\r\n\t\tclass Root extends Api {\r\n\t\t\tconstructor(state){\r\n\t\t\t\tsuper(state);\r\n\t\t\t\tthis.outer = link(this, new Outer());\r\n\t\t\t\tthis.other = link(this, new Other());\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst root = new Root();\r\n\r\n\t\texpect(root.outer.inner.fetch.url).to.equal('/inner');\r\n\t\texpect(root.outer.fetch.url).to.equal('/outer');\r\n\t\texpect(root.other.inner.fetch.url).to.equal('/inner');\r\n\t\texpect(root.other.fetch.url).to.equal('/other');\r\n\t\texpect(root.fetch.url).to.equal('http://some-server.com/api');\r\n\t});\r\n});\r\n\r\ndescribe('.fetch(url, opts, abs=false)', () => {\r\n\tit('is a method added to Api instances decorated with @remote', () => {\r\n\t\t@remote('/test')\r\n\t\tclass Test {}\r\n\t\tconst test = new Test();\r\n\t\texpect(test).to.have.a.property('fetch');\r\n\t\texpect(test.fetch).to.be.a('function');\r\n\t});\r\n\r\n\tit('accepts the `url` to fetch and an optional `opts` options object', () => {\r\n\t});\r\n\r\n\tit('is scoped to be relative to the url set by @remote', () => {\r\n\t\t@remote('/inner')\r\n\t\tclass Inner extends Api {}\r\n\t\t@remote('/outer')\r\n\t\tclass Outer extends Api {constructor(state){super(state); this.inner = link(this, new Inner());}}\r\n\t\t@remote('/other')\r\n\t\tclass Other extends Api {constructor(state){super(state); this.inner = link(this, new Inner());}}\r\n\t\t@remote('http://some-server.com/api')\r\n\t\tclass Root extends Api {\r\n\t\t\tconstructor(state){\r\n\t\t\t\tsuper(state);\r\n\t\t\t\tthis.outer = link(this, new Outer());\r\n\t\t\t\tthis.other = link(this, new Other());\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst root = new Root();\r\n\t\t// stub out the root fetch url so we can intercept calls to it\r\n\t\tvar saved = root.fetch.url;\r\n\t\tconst fetchedUrls = [];\r\n\t\troot.fetch = function(url, opts, abs=false) {\r\n\t\t\tfetchedUrls.push(abs ? url : this.fetch.url + url);\r\n\t\t}\r\n\t\troot.fetch.url = saved;\r\n\t\t// test scoping\r\n\t\troot.fetch('/TEST');\r\n\t\texpect(fetchedUrls[fetchedUrls.length -1]).to.equal('http://some-server.com/api/TEST');\r\n\t\troot.outer.fetch('/TEST');\r\n\t\texpect(fetchedUrls[fetchedUrls.length -1]).to.equal('http://some-server.com/api/outer/TEST');\r\n\t\troot.outer.inner.fetch('/TEST');\r\n\t\texpect(fetchedUrls[fetchedUrls.length -1]).to.equal('http://some-server.com/api/outer/inner/TEST');\r\n\t\troot.other.fetch('/TEST');\r\n\t\texpect(fetchedUrls[fetchedUrls.length -1]).to.equal('http://some-server.com/api/other/TEST');\r\n\t\troot.other.inner.fetch('/TEST');\r\n\t\texpect(fetchedUrls[fetchedUrls.length -1]).to.equal('http://some-server.com/api/other/inner/TEST');\r\n\t});\r\n\r\n\tit('can be used to perform unscoped fetch by setting `abs` to `true`', () => {\r\n\t\t@remote('/inner')\r\n\t\tclass Inner extends Api {}\r\n\t\t@remote('/outer')\r\n\t\tclass Outer extends Api {constructor(state){super(state); this.inner = link(this, new Inner());}}\r\n\t\t@remote('/other')\r\n\t\tclass Other extends Api {constructor(state){super(state); this.inner = link(this, new Inner());}}\r\n\t\t@remote('http://some-server.com/api')\r\n\t\tclass Root extends Api {\r\n\t\t\tconstructor(state){\r\n\t\t\t\tsuper(state);\r\n\t\t\t\tthis.outer = link(this, new Outer());\r\n\t\t\t\tthis.other = link(this, new Other());\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst root = new Root();\r\n\t\t// stub out the root fetch url so we can intercept calls to it\r\n\t\tvar saved = root.fetch.url;\r\n\t\tconst fetchedUrls = [];\r\n\t\troot.fetch = function(url, opts, abs=false) {\r\n\t\t\tfetchedUrls.push(abs ? url : this.fetch.url + url);\r\n\t\t}\r\n\t\troot.fetch.url = saved;\r\n\t\t// test scoping\r\n\t\troot.fetch('/TEST', null, true);\r\n\t\texpect(fetchedUrls[fetchedUrls.length -1]).to.equal('/TEST');\r\n\t\troot.outer.fetch('/TEST', null, true);\r\n\t\texpect(fetchedUrls[fetchedUrls.length -1]).to.equal('/TEST');\r\n\t\troot.outer.inner.fetch('/TEST', null, true);\r\n\t\texpect(fetchedUrls[fetchedUrls.length -1]).to.equal('/TEST');\r\n\t\troot.other.fetch('/TEST', null, true);\r\n\t\texpect(fetchedUrls[fetchedUrls.length -1]).to.equal('/TEST');\r\n\t\troot.other.inner.fetch('/TEST', null, true);\r\n\t\texpect(fetchedUrls[fetchedUrls.length -1]).to.equal('/TEST');\r\n\t});\r\n});\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./redux-fetch-api.spec.jsx\n **/","module.exports = require(\"chai\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"chai\"\n ** module id = 1\n ** module chunks = 0\n **/","module.exports = require(\"redux-apis\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"redux-apis\"\n ** module id = 2\n ** module chunks = 0\n **/","import Api from 'redux-apis';\r\nimport fetch from 'isomorphic-fetch';\r\n\r\nfunction isOnClient() {\r\n\treturn typeof global === 'undefined';\r\n}\r\n\r\nexport function remote(url='', clientUrl=null, onClient=isOnClient()) {\r\n\tif ((arguments.length === 1) && typeof url == 'function') {\r\n\t\t// invocation without parentheses: @remote\r\n\t\treturn remote()(url);\r\n\t}\r\n\treturn (component) => {\r\n\t\tcomponent.prototype.fetch = function scoped_fetch(url, opts, abs=false) {\r\n\t\t\turl = !abs && this.fetch.url ? this.fetch.url + url : url;\r\n\t\t\tlet r, p = this;\r\n\t\t\twhile (p = p.__parent) {\r\n\t\t\t\tif (p.fetch) {\r\n\t\t\t\t\tr = p;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn !abs && r ? r.fetch(url, opts, abs) : fetch(url, opts);\r\n\t\t};\r\n\t\tcomponent.prototype.fetch.url = clientUrl && onClient ? clientUrl : url;\r\n\t\treturn component;\r\n\t}\r\n}\r\n\r\nexport default remote;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./redux-fetch-api.jsx\n **/","module.exports = require(\"isomorphic-fetch\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"isomorphic-fetch\"\n ** module id = 4\n ** module chunks = 0\n **/"],"sourceRoot":""}